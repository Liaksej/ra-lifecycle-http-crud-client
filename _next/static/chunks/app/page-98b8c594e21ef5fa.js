(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[931],{6966:function(e,t,r){Promise.resolve().then(r.bind(r,3418))},3418:function(e,t,r){"use strict";r.r(t),r.d(t,{default:function(){return Home}});var s=r(9424),n=r(8614),o=r(1640);let a="https://ra-lifecycle-http-crud-server.vercel.app/notes";function retrieveNotes(e){fetch(a).then(e=>e.json()).then(t=>{t&&e({type:"RETRIEVE_NOTES",payload:t})}).catch(e=>{throw Error(e)})}let Note=e=>{let{note:t,dispatch:r,service:a}=e;return(0,s.jsxs)("div",{className:"relative w-96 border-2",children:[(0,s.jsx)(n.Z,{className:"absolute top-[-1.25rem] right-[-1.25rem]","aria-label":"delete",onClick:()=>{!function(e,t,r){let s="".concat(e,"?id=").concat(t);fetch(s,{method:"DELETE",headers:{"Content-Type":"application/json",Accept:"application/json"}}).then(e=>{if(!e.ok)throw Error(e.statusText)}).then(()=>{retrieveNotes(r)})}(a,t.id,r)},children:(0,s.jsx)(o.Z,{color:"disabled"})}),(0,s.jsx)("div",{className:"break-words",children:t.content})]})};var c=r(4150);let Notes=e=>{let{state:t,dispatch:r,service:o}=e;return(0,s.jsxs)("div",{className:"w-[75%] mx-auto",children:[(0,s.jsxs)("div",{className:"flex items-baseline pb-4",children:[(0,s.jsx)("h1",{className:"self-center",children:"Notes"}),(0,s.jsx)(n.Z,{className:"","aria-label":"update",size:"small",onClick:()=>{retrieveNotes(r)},children:(0,s.jsx)(c.Z,{color:"action"})})]}),(0,s.jsx)("div",{className:"flex flex-wrap gap-6 justify-center",children:t.notes&&t.notes.length>0&&t.notes.map(e=>(0,s.jsx)(Note,{note:e,dispatch:r,service:o},e.id))})]})};var i=r(9531),l=r(4615),u=r(3381);let FormForNote=e=>{let{dispatch:t,service:r}=e,o=(0,u.useRef)(null);return(0,s.jsxs)("form",{className:"w-96 mx-auto pt-16 relative",onSubmit:e=>{var s;e.preventDefault(),(null===(s=o.current)||void 0===s?void 0:s.value)&&(function(e,t,r){fetch(e,{method:"POST",headers:{"Content-Type":"application/json",Accept:"application/json"},body:JSON.stringify({content:t})}).then(e=>{if(!e.ok)throw Error(e.statusText)}).then(()=>{retrieveNotes(r)})}(r,o.current.value,t),o.current.value="",o.current.focus())},children:[(0,s.jsx)(i.u,{className:"w-96 border-2 resize-none",minRows:3,ref:o}),(0,s.jsx)(n.Z,{size:"small",className:"absolute right-[0.25rem] bottom-[0.55rem]",type:"submit",children:(0,s.jsx)(l.Z,{})})]})};function reducer(e,t){return"RETRIEVE_NOTES"===t.type?{...e,notes:[...t.payload]}:e}function Home(){let[e,t]=(0,u.useReducer)(reducer,{notes:[]});return(0,u.useEffect)(()=>{retrieveNotes(t)},[]),(0,s.jsxs)(s.Fragment,{children:[(0,s.jsx)(Notes,{state:e,dispatch:t,service:a}),(0,s.jsx)(FormForNote,{dispatch:t,service:a})]})}}},function(e){e.O(0,[985,362,95,744],function(){return e(e.s=6966)}),_N_E=e.O()}]);